(function(){function ac(G){var x,aw,av;var W=G.split(".");av=window;for(x=0,aw=W.length;x<aw;x++){av[W[x]]=av[W[x]]||{};av=av[W[x]]}return av}var j=window;var s=ac("google.maps");var y,Y,ak,r,c,m,J,b,u,am,X,h,H,ah,O,w,L,e;ak=j.GMap2||s.Map2;y=j.GEvent||s.Event;r=j.GProjection||s.Projection;c=j.GTileLayer||s.TileLayer;m=j.CopyrightCollection||s.CopyrightCollection;J=j.GCopyright||s.Copyright;b=j.GMapType||s.MapType;u=j.GMercatorProjection||s.MercatorProjection;am=j.G_MAP_OVERLAY_LAYER_PANE||s.MAP_OVERLAY_LAYER_PANE;X=j.GTileLayerOverlay||s.TileLayerOverlay;h=j.GInfoWindowTab||s.InfoWindowTab;H=j.GLatLngBounds||s.LatLngBounds;ah=j.GPolygon||s.Polygon;O=j.GPolyline||s.Polyline;w=j.GOverlay||s.Overlay;Y=j.GLatLng||s.LatLng;e=j.GPoint||s.Point;L=j.GMarker||s.Marker;var at=Math.PI/180;var ap="esriGeometryPoint";var ae="esriGeometryPolyline";var i="esriGeometryPolygon";var af="esriGeometryMultipoint";var o="esriGeometryEnvelope";var F="esriSpatialRelIntersects";var K="esriSpatialRelContains";var N="esriSpatialRelCrosses";var V="esriSpatialRelEnvelopeIntersects";var B="esriSpatialRelIndexIntersects";var q="esriSpatialRelOverlaps";var n="esriSpatialRelTouches";var E="esriSpatialRelWithin";function al(W,aw,x){var G=(aw==="")?0:W.indexOf(aw);var av=x===""?W.length:W.indexOf(x,G+aw.length);return W.substring(G+aw.length,av)}function p(x){return typeof x==="string"}function D(x){return x&&x.splice}function ad(av,x,G){if(av&&x){var W;for(W in av){if(G||!(W in x)){x[W]=av[W]}}}return x}function aj(W,G,x){if(y){y.trigger.apply(this,arguments)}}function v(x,av,G){if(x&&av){if(x.indexOf&&!G){return x.indexOf(av)}else{for(var W=0,aw=x.length;W<aw;W++){if(x[W]===av||(G===true&&x[W].toString().toLowerCase()===av.toString().toLowerCase())){return W}}}}return -1}function ag(x,W){for(var G=0,av=W.length;G<av;G++){x.push(W[G])}return x}function t(x,W){var G=v(x,W);if(G!==-1){x.splice(G,1)}}var au={};var l=0;window.ags_jsonp=window.ags_jsonp||{};var C=window.ags_jsonp;au.getJSON=function(G,av,aA,ay){var W="ags_jsonp"+(l++)+"_"+Math.floor(Math.random()*1000000);var ax=G+(G.indexOf("?")===-1?"?":"&");if(av){for(var aC in av){if(av.hasOwnProperty(aC)){ax+=(aC+"="+(escape?escape(av[aC]):encodeURIComponent(av[aC]))+"&")}}}var aB=document.getElementsByTagName("head")[0];if(!aB){throw new Error("document must have header tag")}var az=document.createElement("script");az.src=ax+aA+"=ags_jsonp."+W;az.id=W;var aw=function(){delete C[W];aB.removeChild(az);az=null;ay.apply(null,arguments);aj(au,"jsonpend",W)};C[W]=aw;aB.appendChild(az);aj(au,"jsonpstart",W);return W};au.getOptionValue=function(x,av,ax,az,W){var ay=ad(x,{});if(av){ay=ad(av[ax],ay,true);if(az&&av.serviceOptions&&av.serviceOptions[az]){var aw=av.serviceOptions[az];ay=ad(aw[ax],ay,true);if(W&&aw.layerOptions&&aw.layerOptions[W]){var G=aw.layerOptions[W];ay=ad(G[ax],ay,true)}}}return ay};au.getAttributeValue=function(av,W){if(typeof av[W]!=="undefined"){return av[W]}for(var G in av){if(av.hasOwnProperty(G)){if(W.toLowerCase()===G.toString().toLowerCase()){return av[G]}}}return null};au.fromGeometryToJSON=function(G,aw){function av(az){var ax=[];for(var ay=0,aA=az.length;ay<aA;ay++){ax.push("["+az[ay][0]+","+az[ay][1]+"]")}return"["+ax.join(",")+"]"}function W(ay){var ax=[];for(var az=0,aA=ay.length;az<aA;az++){ax.push(av(ay[az]))}return"["+ax.join(",")+"]"}var x="{";if(G.x){x+="x:"+G.x+",y:"+G.y}else{if(G.xmin){x+="xmin:"+G.xmin+",ymin:"+G.ymin+",xmax:"+G.xmax+",ymax:"+G.ymax}else{if(G.points){x+="points:"+av(G.points)}else{if(G.paths){x+="paths:"+W(G.paths)}else{if(G.rings){x+="rings:"+W(G.rings)}}}}}if(aw&&G.spatialReference){x+=",spatialReference:{wkid:"+G.spatialReference.wkid+"}"}x+="}";return x};au.groupResultsByLayer=function(aC){var ax={};var ay,av;var G=aC.results;if(G){for(var W=0,az=G.length;W<az;W++){ay=G[W];av=ay.layerName;if(!ax[av]){var aw=[];for(var aA in ay.attributes){if(ay.attributes.hasOwnProperty(aA)){aw.push(aA)}}var aB={displayFieldName:ay.displayFieldName,spatialReference:ay.geometry?ay.geometry.spatialReference:null,geometryType:ay.geometryType,fieldAliases:aw,features:[]};ax[av]=aB}ax[av].features.push(ay)}}return ax};au.getResultSetHtml=function(av,aw){var W='<table class="ags-resultset">';var G,x,az,ax;aw=aw||(av.features.length===1?"v":"h");if(aw==="h"){W+="<tr>";for(G=0,az=av.fieldAliases.length;G<az;G++){W+='<th class="ags-fieldname">'+av.fieldAliases[G]+"</th>"}W+="</tr>"}for(G=0,az=av.features.length;G<az;G++){var ay=av.features[G].attributes;if(aw==="h"){W+="<tr>"}else{if(G>0){W+='<tr><td colspan="2"><hr/></td></tr>'}}for(x=0,ax=av.fieldAliases.length;x<ax;x++){if(aw==="h"){W+='<td class="ags-fieldvalue">'+ay[av.fieldAliases[x]]+"</td>"}else{W+='<tr><td class="ags-fieldname">'+av.fieldAliases[x]+'</td><td class="ags-fieldvalue">'+ay[av.fieldAliases[x]]+"</td></tr>"}}if(aw==="h"){W+="</tr>"}}W+="</table>";return W};var ab={maxPolyPoints:1000,style:{icon:null,strokeColor:"#FF0000",strokeWeight:2,strokeOpacity:0.5,outlineColor:"#FF0000",outlineWeight:2,outlineOpacity:0.5,fillColor:"#FFFF00",fillOpacity:0.5}};var ar={};function A(x){x=x||{};this.wkid=x.wkid}A.prototype.forward=function(x){return x};A.prototype.reverse=function(x){return x};A.prototype.getCircumference=function(){return 360};A.prototype.transform=function(W){if(W.spatialReference.wkid!==this.wkid){var G=ar.getSpatialReference(W.spatialReference.wkid);var x=G.reverse([W.xmin,W.ymin]);var av=G.reverse([W.ymin,W.ymax]);x=this.forward(x);av=this.forward(av);return{xmin:x[0],ymin:x[1],xmax:av[0],ymax:av[1],spatialReference:{wkid:this.wkid}}}else{return W}};function z(x){x=x||{};A.call(this,x)}z.prototype=new A();function aa(x){x=x||{};A.call(this,x);var aw=x.inverse_flattening;var az=x.standard_parallel_1*at;var ay=x.standard_parallel_2*at;var aA=x.latitude_of_origin*at;this.a_=x.semi_major/x.unit;this.lamdaF_=x.central_meridian*at;this.FE_=x.false_easting;this.FN_=x.false_northing;var av=1/aw;var aB=2*av-av*av;this.e_=Math.sqrt(aB);var aD=this.calc_m_(az,aB);var aC=this.calc_m_(ay,aB);var ax=this.calc_t_(aA,this.e_);var W=this.calc_t_(az,this.e_);var G=this.calc_t_(ay,this.e_);this.n_=Math.log(aD/aC)/Math.log(W/G);this.F_=aD/(this.n_*Math.pow(W,this.n_));this.rF_=this.calc_r_(this.a_,this.F_,ax,this.n_)}aa.prototype=new A();aa.prototype.calc_m_=function(G,W){var x=Math.sin(G);return Math.cos(G)/Math.sqrt(1-W*x*x)};aa.prototype.calc_t_=function(G,W){var x=W*Math.sin(G);return Math.tan(Math.PI/4-G/2)/Math.pow((1-x)/(1+x),W/2)};aa.prototype.calc_r_=function(x,W,G,av){return x*W*Math.pow(G,av)};aa.prototype.calc_phi_=function(x,av,W){var G=av*Math.sin(W);return Math.PI/2-2*Math.atan(x*Math.pow((1-G)/(1+G),av/2))};aa.prototype.solve_phi_=function(W,aw,ax){var G=0;var av=ax;var x=this.calc_phi_(W,aw,av);while(Math.abs(x-av)>1e-9&&G<10){G++;av=x;x=this.calc_phi_(W,aw,av)}return x};aa.prototype.forward=function(x){var ax=x[1]*at;var G=x[0]*at;var av=this.calc_t_(ax,this.e_);var aw=this.calc_r_(this.a_,this.F_,av,this.n_);var W=this.n_*(G-this.lamdaF_);var ay=this.FE_+aw*Math.sin(W);var az=this.FN_+this.rF_-aw*Math.cos(W);return[ay,az]};aa.prototype.reverse=function(ay){var ax=ay[0];var az=ay[1];var W=Math.atan((ax-this.FE_)/(this.rF_-(az-this.FN_)));var G=(this.n_>0?1:-1)*Math.sqrt((ax-this.FE_)*(ax-this.FE_)+(this.rF_-(az-this.FN_))*(this.rF_-(az-this.FN_)));var av=Math.pow((G/(this.a_*this.F_)),1/this.n_);var aw=this.solve_phi_(av,this.e_,0);var x=W/this.n_+this.lamdaF_;return[x/at,aw/at]};aa.prototype.getCircumference=function(){return Math.PI*2*this.a_};function U(av){av=av||{};A.call(this,av);this.a_=av.semi_major/av.unit;var G=av.inverse_flattening;this.k0_=av.scale_factor;var x=av.latitude_of_origin*at;this.lamdaF_=av.central_meridian*at;this.FE_=av.false_easting;this.FN_=av.false_northing;var W=1/G;this.es_=2*W-W*W;this.ep4_=this.es_*this.es_;this.ep6_=this.ep4_*this.es_;this.eas_=this.es_/(1-this.es_);this.M0_=this.calc_m_(x,this.a_,this.es_,this.ep4_,this.ep6_)}U.prototype=new A();U.prototype.calc_m_=function(G,x,aw,av,W){return x*((1-aw/4-3*av/64-5*W/256)*G-(3*aw/8+3*av/32+45*W/1024)*Math.sin(2*G)+(15*av/256+45*W/1024)*Math.sin(4*G)-(35*W/3072)*Math.sin(6*G))};U.prototype.forward=function(av){var ax=av[1]*at;var aB=av[0]*at;var az=this.a_/Math.sqrt(1-this.es_*Math.pow(Math.sin(ax),2));var W=Math.pow(Math.tan(ax),2);var x=this.eas_*Math.pow(Math.cos(ax),2);var G=(aB-this.lamdaF_)*Math.cos(ax);var ay=this.calc_m_(ax,this.a_,this.es_,this.ep4_,this.ep6_);var aA=this.FE_+this.k0_*az*(G+(1-W+x)*Math.pow(G,3)/6+(5-18*W+W*W+72*x-58*this.eas_)*Math.pow(G,5)/120);var aw=this.FN_+this.k0_*(ay-this.M0_)+az*Math.tan(ax)*(G*G/2+(5-W+9*x+4*x*x)*Math.pow(G,4)/120+(61-58*W+W*W+600*x-330*this.eas_)*Math.pow(G,6)/720);return[aA,aw]};U.prototype.reverse=function(aC){var aF=aC[0];var ax=aC[1];var aA=(1-Math.sqrt(1-this.es_))/(1+Math.sqrt(1-this.es_));var G=this.M0_+(ax-this.FN_)/this.k0_;var aD=G/(this.a_*(1-this.es_/4-3*this.ep4_/64-5*this.ep6_/256));var aB=aD+(3*aA/2-27*Math.pow(aA,3)/32)*Math.sin(2*aD)+(21*aA*aA/16-55*Math.pow(aA,4)/32)*Math.sin(4*aD)+(151*Math.pow(aA,3)/6)*Math.sin(6*aD)+(1097*Math.pow(aA,4)/512)*Math.sin(8*aD);var av=this.eas_*Math.pow(Math.cos(aB),2);var ay=Math.pow(Math.tan(aB),2);var az=this.a_/Math.sqrt(1-this.es_*Math.pow(Math.sin(aB),2));var W=this.a_*(1-this.es_)/Math.pow((1-this.es_*Math.pow(Math.sin(aB),2)),3/2);var x=(aF-this.FE_)/(az*this.k0_);var aw=aB-(az*Math.tan(aB)/W)*(x*x/2-(5+3*ay+10*av-4*av*av-9*this.eas_)*Math.pow(x,4)/24+(61+90*ay+28*av+45*ay*ay-252*this.eas_-3*av*av)*Math.pow(x,6)/720);var aE=this.lamdaF_+(x-(1+2*ay+av)*Math.pow(x,3)/6+(5-2*av+28*ay-3*av*av+8*this.eas_+24*ay*ay)*Math.pow(x,5)/120)/Math.cos(aB);return[aE/at,aw/at]};U.prototype.getCircumference=function(){return Math.PI*2*this.a_};function R(x){x=x||{};A.call(this,x);this.a_=(x.semi_major||6378137)/(x.unit||1);this.lamdaF_=(x.central_meridian||0)*at}R.prototype=new A();R.prototype.forward=function(x){var W=x[1]*at;var G=x[0]*at;var av=this.a_*(G-this.lamdaF_);var aw=(this.a_/2)*Math.log((1+Math.sin(W))/(1-Math.sin(W)));return[av,aw]};R.prototype.reverse=function(av){var W=av[0];var aw=av[1];var G=Math.PI/2-2*Math.atan(Math.exp(-aw/this.a_));var x=W/this.a_+this.lamdaF_;return[x/at,G/at]};R.prototype.getCircumference=function(){return Math.PI*2*this.a_};function d(x){x=x||{};A.call(this,x);this.lng_=x.latlng.xmin;this.lat_=x.latlng.ymin;this.x_=x.coords.xmin;this.y_=x.coords.ymin;this.xscale_=(x.coords.xmax-x.coords.xmin)/(x.latlng.xmax-x.latlng.xmin);this.yscale_=(x.coords.ymax-x.coords.ymin)/(x.latlng.ymax-x.latlng.ymin)}d.prototype=new A();d.prototype.forward=function(x){var G=this.x_+(x[0]-this.lng_)*this.xscale_;var W=this.y_+(x[1]-this.lat_)*this.yscale_;return[G,W]};d.prototype.reverse=function(G){var x=this.lng_+(G[0]-this.x_)/this.xscale_;var W=this.lat_+(G[1]-this.y_)/this.yscale_;return[x,W]};d.prototype.getCircumference=function(){return this.xscale_*360};var an=new z({wkid:4326});var Q=new z({wkid:4269});var T=new R({wkid:102113,semi_major:6378137,central_meridian:0,unit:1});ar={"4326":an,"4269":Q,"102113":T};ar.addSpatialReference=function(aw,ay){var W=this[""+aw];if(W){return W}if(ay instanceof A){this[""+aw]=ay;return ay}var av=ay;var ax={wkid:aw};var G=al(av,'PROJECTION["','"]');var x=al(av,"SPHEROID[","]").split(",");if(G!==""){ax.unit=parseFloat(al(al(av,"PROJECTION",""),"UNIT[","]").split(",")[1]);ax.semi_major=parseFloat(x[1]);ax.inverse_flattening=parseFloat(x[2]);ax.latitude_of_origin=parseFloat(al(av,'"Latitude_Of_Origin",',"]"));ax.central_meridian=parseFloat(al(av,'"Central_Meridian",',"]"));ax.false_easting=parseFloat(al(av,'"False_Easting",',"]"));ax.false_northing=parseFloat(al(av,'"False_Northing",',"]"))}switch(G){case"":W=new A(ax);break;case"Lambert_Conformal_Conic":ax.standard_parallel_1=parseFloat(al(av,'"Standard_Parallel_1",',"]"));ax.standard_parallel_2=parseFloat(al(av,'"Standard_Parallel_2",',"]"));W=new aa(ax);break;case"Transverse_Mercator":ax.scale_factor=parseFloat(al(av,'"Scale_Factor",',"]"));W=new U(ax);break;default:}if(W){this[""+aw]=W}return W};ar.getSpatialReference=function(x){return this[""+x]};function P(x){this.url=x;this.loaded_=false;this.correct_=false;this.definition=null}P.prototype.loadInfo=function(x){var G=this;if(this.loaded_&&this.correct_){return}au.getJSON(this.url,{f:"json"},"callback",function(W){if(W.error){G.correct_=false}else{G.correct_=true;ad(W,G)}G.loaded_=true;aj(G,"load");if(x){x()}})};P.prototype.hasLoaded=function(){return this.loaded_};P.prototype.getFieldNames=function(){var x=[];if(this.hasLoaded()){for(var G=0;G<this.fields.length;G++){x.push(this.fields[G].name)}}return x};P.prototype.isInScale=function(x){if(this.maxScale&&this.maxScale>x){return false}if(this.minScale&&this.minScale<x){return false}return true};P.prototype.query=function(W,G){if(!W){return}var x=ad(W,{});x.f=x.f||"json";if(x.geometry&&!p(x.geometry)){x.geometry=au.fromGeometryToJSON(x.geometry)}if(x.geometry){x.spatialRel=x.spatialRel||F}if(x.outFields&&!p(x.outFields)){x.outFields=x.outFields.join(",")}x.returnGeometry=x.returnGeometry===false?false:true;au.getJSON(this.url+"/query",x,"callback",G)};function ai(G,x){this.url=G;var av=G.split("/");this.name=av[av.length-2].replace(/_/g," ");var W=this;this.loaded_=false;this.correct_=false;au.getJSON(G,{f:"json"},"callback",function(aw){W.init_(aw,x)})}ai.prototype.init_=function(aB,aA){var az=this;function W(aH){az.loaded_=true;for(var aG=0,aI=az.layers_.length;aG<aI;aG++){var aF=az.layers_[aG];if(aF.subLayerIds){aF.subLayers=[];for(var aD=0,aC=aF.subLayerIds.length;aD<aC;aD++){var aE=az.getLayer(aF.subLayerIds[aD]);aF.subLayers.push(aE);aE.parentLayer=aF}}}az.initialExtent.xmin=Math.max(az.initialExtent.xmin,az.fullExtent.xmin);az.initialExtent.ymin=Math.max(az.initialExtent.ymin,az.fullExtent.ymin);az.initialExtent.xmax=Math.min(az.initialExtent.xmax,az.fullExtent.xmax);az.initialExtent.ymax=Math.min(az.initialExtent.ymax,az.fullExtent.ymax);aj(az,"load");if(aA){aA()}}if(aB.error){this.correct_=false}else{this.correct_=true;ad(aB,this);var av=[];var x=[];for(var aw=0,ay=aB.layers.length;aw<ay;aw++){var G=aB.layers[aw];var ax=new P(this.url+"/"+G.id);ad(G,ax);ax.visible=G.defaultVisibility;av.push(ax);x.push(G.id)}this.layers_=av;delete this.layers;this.spatialReference_=ar.getSpatialReference(""+aB.spatialReference.wkid);if(!this.spatialReference_){this.exportMap({bbox:aB.fullExtent,bboxSR:aB.spatialReference.wkid,size:"1,1",imageSR:4326,layers:"hide:"+x.join(",")},function(aD){var aC=new d({wkid:aB.spatialReference.wkid,latlng:aD.extent,coords:aB.fullExtent});ar.addSpatialReference(aB.spatialReference.wkid,aC);az.spatialReference_=aC;W(aB)})}else{W(aB)}}};ai.prototype.hasLoaded=function(){return this.loaded_};ai.prototype.loadedCorrectly=function(){return this.loaded_&&this.correct_};ai.prototype.getSpatialReference=function(){return this.spatialReference_};ai.prototype.getLayers=function(){return this.layers_};ai.prototype.getLayer=function(G){var W=this.layers_;if(W){for(var x=0,av=W.length;x<av;x++){if(G===W[x].id){return W[x]}if(p(G)&&W[x].name.toLowerCase()===G.toLowerCase()){return W[x]}}}return null};ai.prototype.getLayerIds=function(x){var W;if(p(x)){W=this.getLayer(x);if(W){return W.id}}else{if(D(x)){var av=[];for(var G=0,aw=x.length;G<aw;G++){W=this.getLayer(x[G]);av.push(W?W.id:-1)}return av}}return -1};ai.prototype.exportMap=function(x,aC){if(!x){return}var G=ad(x,{});G.f=G.f||"json";var aD=G.bbox;if(aD.xmin){G.bbox=""+aD.xmin+","+aD.ymin+","+aD.xmax+","+aD.ymax}G.size=G.size||""+G.width+","+G.height;G.transparent=(G.transparent===false?false:true);var ay=[];var aB=[];var aw=false;var ax;var av,az;for(av=0,az=this.layers_.length;av<az;av++){ax=this.layers_[av];if(ax.subLayers){for(var W=0,aA=ax.subLayers.length;W<aA;W++){if(ax.subLayers[W].visible===false){ax.visible=false;break}}}}for(av=0,az=this.layers_.length;av<az;av++){ax=this.layers_[av];if(ax.visible!==ax.defaultVisibility){aw=true}if(ax.visible===true){ay.push(ax.id)}if(ax.definition){aB.push(ax.id+":"+ax.definition)}}if(aw===true){if(!G.layers||!p(G.layers)){G.layers="show:"+ay.join(",")}}if(aB.length>0){if(!G.layerDefs||!p(G.layerDefs)){G.layerDefs=aB.join(";")}}if(ay.length===0){aC({})}else{au.getJSON(this.url+"/export",G,"callback",aC)}};ai.prototype.identify=function(G,av){if(!G){return}var W=ad(G,{});W.f=W.f||"json";if(!p(W.geometry)){W.geometry=au.fromGeometryToJSON(W.geometry)}var x=W.mapExtent;if(x.xmin){W.mapExtent=""+x.xmin+","+x.ymin+","+x.xmax+","+x.ymax}if(!W.imageDisplay){W.imageDisplay=""+W.width+","+W.height+","+W.dpi}if(W.layers&&!p(W.layers)){W.layers="all:"+this.getLayerIds(W.layers).join(",")}W.returnGeometry=(W.returnGeometry===false?false:true);au.getJSON(this.url+"/identify",W,"callback",av)};ai.prototype.find=function(x,W){if(!x){return}var G=ad(x,{});G.f=G.f||"json";if(G.layers&&!p(G.layers)){G.layers=this.getLayerIds(G.layers).join(",")}if(G.searchFields&&!p(G.searchFields)){G.searchFields=G.searchFields.join(",")}G.contains=(G.contains===false?false:true);G.returnGeometry=(G.returnGeometry===false?false:true);au.getJSON(this.url+"/find",G,"callback",W)};ai.prototype.generateKML=function(x){};ai.prototype.queryLayer=function(x,W,av){var G=this.getLayer(x);if(G){G.query(W,av)}};function I(x){this.url=x}I.prototype.project=function(aw,ay){if(!aw){return}aw.f=aw.f||"json";if(!p(aw.geometries)){var x=ap;var W=[];for(var G=0,ax=aw.geometries.length;G<ax;G++){var av=aw.geometries[G];if(G===0){if(av.points){x=af}else{if(av.paths){x=ae}else{if(av.rings){x=i}}}}W.push(au.fromGeometryToJSON(av,false))}aw.geometries="{ geometryType:"+x+", geometries:["+W.join(",")+"]}"}au.getJSON(this.url+"/project",aw,"callback",ay)};function g(x){this.url=x;var G=this;au.getJSON(x,{f:"json"},"callback",function(W){G.init_(W)})}g.prototype.init_=function(x){ad(x,this);aj(this,"load")};g.prototype.hasLoaded=function(){return this.addressFields!==null};g.prototype.findAddressCandidates=function(x,W){var G=ad(x,{});G.f=G.f||"json";if(G.inputs){ad(G.inputs,G);delete G.inputs}if(D(G.outFields)){G.outFields=G.outFields.join(",")}au.getJSON(this.url+"/findAddressCandidates",G,"callback",W)};g.prototype.geocode=function(x,G){this.findAddressCandidates(x,G)};g.prototype.reverseGeocode=function(x,G){x.f=x.f||"json";if(!p(x.location)){x.location=au.fromGeometryToJSON(x.location)}au.getJSON(this.url+"/reverseGeocode",x,"callback",G)};function aq(x,G){if(!x){throw new Error("map service is not tiled")}this.tileInfo_=x;this.spatialReference_=ar.getSpatialReference(x.spatialReference.wkid);if(!this.spatialReference_){throw new Error("unsupported Spatial Reference")}this.zoomOffset_=Math.floor(Math.log(this.spatialReference_.getCircumference()/this.tileInfo_.lods[0].resolution/256)/Math.LN2+0.5);this.fullExtent_=G}aq.prototype=new r();aq.prototype.fromLatLngToPixel=function(ay,av){if(ay===null||isNaN(ay.lat())||isNaN(ay.lng())){return null}var aw=this.spatialReference_.forward([ay.lng(),ay.lat()]);var ax=av-this.zoomOffset_;var W=this.getUnitsPerPixel(av);var G=Math.round((aw[0]-this.tileInfo_.origin.x)/W);var x=Math.round((this.tileInfo_.origin.y-aw[1])/W);return new e(G,x)};aq.prototype.getUnitsPerPixel=function(W){var av=W-this.zoomOffset_;var G=Number.MAX_VALUE;if(this.tileInfo_.lods[av]){G=this.tileInfo_.lods[av].resolution}else{var x=Math.pow(2,W-this.maxResolution());G=this.tileInfo_.lods[this.tileInfo_.lods.length-1].resolution/x}return G};aq.prototype.getScale=function(W){var av=W-this.zoomOffset_;var G=0;if(this.tileInfo_.lods[av]){G=this.tileInfo_.lods[av].scale}else{var x=Math.pow(2,W-this.maxResolution());G=this.tileInfo_.lods[this.tileInfo_.lods.length-1].scale/x}return G};aq.prototype.fromPixelToLatLng=function(W,aw,ax){if(W===null){return null}var az=aw-this.zoomOffset_;var av=this.getUnitsPerPixel(aw);var G=W.x*av+this.tileInfo_.origin.x;var aA=this.tileInfo_.origin.y-W.y*av;var ay=this.spatialReference_.reverse([G,aA]);return new Y(ay[1],ay[0])};aq.prototype.tileCheckRange=function(ay,aB,ax){var aA=aB-this.zoomOffset_;if(this.tileInfo_.lods[aA]){var az=this.fullExtent_;if(!az){return true}var av=ay.x*ax*this.tileInfo_.lods[aA].resolution+this.tileInfo_.origin.x;var W=this.tileInfo_.origin.y-(ay.y+1)*ax*this.tileInfo_.lods[aA].resolution;var G=(ay.x+1)*ax*this.tileInfo_.lods[aA].resolution+this.tileInfo_.origin.x;var x=this.tileInfo_.origin.y-ay.y*ax*this.tileInfo_.lods[aA].resolution;var aw=!(az.xmin>G||az.xmax<av||az.ymax<W||az.ymin>x);return aw}else{return false}};aq.prototype.getWrapWidth=function(x){var G=x-this.zoomOffset_;if(this.tileInfo_.lods[G]){return this.spatialReference_.getCircumference()/this.tileInfo_.lods[G].resolution}else{return Number.MAX_VALUE}};aq.prototype.getTileSize=function(){return this.tileInfo_.rows};aq.prototype.minResolution=function(){return this.zoomOffset_};aq.prototype.maxResolution=function(){return this.zoomOffset_+this.tileInfo_.lods.length-1};aq.prototype.getSpatialReference=function(){return this.spatialReference_};function ao(av,W){W=W||{};this.mapService_=(av instanceof ai)?av:new ai(av);if(W.name){this.mapService_.name=W.name}if(W.hosts){var ay=al(this.mapService_.url,"","://");var az=al(this.mapService_.url,"://","/");var aA=al(this.mapService_.url,ay+"://"+az,"");this.urlTemplate_=ay+"://"+W.hosts+aA;this.numOfHosts_=parseInt(al(W.hosts,"[","]"),10)}if(this.mapService_.hasLoaded()){this.init_(W)}else{var aw=this;y.addListener(this.mapService_,"load",function(){aw.init_(W)});var x=W.copyrights;this.projection_=W.projection;var G=W.minResolution||(this.projection_?this.projection_.minResolution():0);var ax=W.maxResolution||(this.projection_?this.projection_.maxResolution():19);c.call(this,x,G,ax,W)}}ao.prototype=new c();ao.prototype.init_=function(G){this.projection_=new aq(this.mapService_.tileInfo,this.mapService_.fullExtent);var av=G.copyrights;if(!av){av=new m("");av.addCopyright(new J(1,au.fromEnvelopeToLatLngBounds(this.mapService_.fullExtent),this.projection_.zoomOffset_,this.mapService_.copyrightText))}var W=G.minResolution||this.projection_.minResolution();var x=G.maxResolution||this.projection_.maxResolution();if(G.tileUrlTemplate){delete G.tileUrlTemplate}c.call(this,av,W,x,G);y.trigger(this,"load")};ao.prototype.getMapService=function(){return this.mapService_};ao.prototype.getFullBounds=function(){this.fullBounds_=this.fullBounds_||au.fromEnvelopeToLatLngBounds(this.mapService_.fullExtent);return this.fullBounds_};ao.prototype.getInitialBounds=function(){this.initialBounds_=this.initialBounds_||au.fromEnvelopeToLatLngBounds(this.mapService_.initialExtent);return this.initialBounds_};ao.prototype.getName=function(){return this.mapService_.name};ao.prototype.getProjection=function(){return this.projection_};ao.prototype.getTileUrl=function(W,G){var av=G-(this.projection_?this.projection_.minResolution():this.minResolution());if(!isNaN(W.x)&&!isNaN(W.y)&&av>=0){var x=this.mapService_.url;if(this.urlTemplate_){x=this.urlTemplate_.replace("["+this.numOfHosts_+"]",""+((W.y+W.x)%this.numOfHosts_))}return x+"/tile/"+av+"/"+W.y+"/"+W.x}return""};ao.prototype.hasLoaded=function(){return this.mapService_.hasLoaded()};function a(G,ax){var ay=this;ax=ax||{};var av=G;if(p(G)){av=[new ao(G)]}else{if(G instanceof ao){av=[G]}}var W=0,aw;function aA(){W++;if(W===av.length){ay.init_(av,ax)}}for(aw=0;aw<av.length;aw++){var az=av[aw].getMapService();if(az.hasLoaded()===false){y.addListener(az,"load",aA)}else{W++}}if(W===av.length){this.init_(av,ax)}else{var x=null;if(ax.projection){x=ax.projection;for(aw=0;aw<av.length;aw++){if(!av[aw].projection_){av[aw].projection_=x}}}else{x=av[0].projection_}if(x){ax.tileSize=x.getTileSize()}b.call(this,av,x||new u(20),ax.name||av[0].getMapService().name,ax)}}a.prototype=new b();a.prototype.init_=function(W,G){G.tileSize=W[0].getProjection().getTileSize();var x=G.name||W[0].getMapService().name;b.call(this,W,W[0].getProjection(),x,G);y.trigger(this,"load")};function M(G,x){x=x||{};this.mapService_=(G instanceof ai)?G:new ai(G);if(x.name){this.mapService_.name=x.name}this.minZoom_=x.minResolution;this.maxZoom_=x.maxResolution;if(this.mapService_.hasLoaded()){this.init_(x)}else{var W=this;y.addListener(this.mapService_,"load",function(){W.init_(x)})}}M.prototype=new w();M.prototype.init_=function(x){this.opacity_=x.opacity||1;this.exportParams_=x.exportParams||{};this.drawing_=false;this.redraw_=false;if(this.img_===null){this.refresh()}if(this.map_){this.setupMapType_()}y.trigger(this,"load")};M.prototype.setupMapType_=function(W){if(W){W.agsOvs_=W.agsOvs_||[];if(v(W.agsOvs_,this)===-1){W.agsOvs_.push(this)}}else{if(this.map_){var G=this.map_.getMapTypes();for(var x=0;x<G.length;x++){W=G[x];W.agsOvs_=W.agsOvs_||[];if(v(W.agsOvs_,this)===-1){W.agsOvs_.push(this)}}}}};M.prototype.getMapService=function(){return this.mapService_};M.prototype.getFullBounds=function(){this.fullBounds_=this.fullBounds_||au.fromEnvelopeToLatLngBounds(this.mapService_.fullExtent);return this.fullBounds_};M.prototype.getInitialBounds=function(){this.initialBounds_=this.initialBounds_||au.fromEnvelopeToLatLngBounds(this.mapService_.initialExtent);return this.initialBounds_};M.prototype.getName=function(){return this.mapService_.name};M.prototype.setOpacity=function(W){var av=Math.min(Math.max(W,0),1);this.opacity_=av;var x=this.img_;if(x){var G=x.style;if(typeof G.opacity!=="undefined"){G.opacity=av}if(typeof G.filters!=="undefined"){G.filters.alpha.opacity=Math.floor(100*av)}if(typeof G.filter!=="undefined"){G.filter="alpha(opacity:"+Math.floor(av*100)+")"}}};M.prototype.getOpacity=function(){return this.opacity_};M.prototype.hasLoaded=function(){return this.mapService_.hasLoaded()};M.prototype.refresh=function(){if(!this.mapService_.hasLoaded()||this.map_===null){return}if(this.drawing_===true){this.redraw_=true;return}if(this.img_!==null){this.div_.removeChild(this.img_);this.img_=null}if(this.isHidden()){return}var av=this.map_.getBounds();var x=this.map_.getCurrentMapType().getProjection().getSpatialReference();var G=this;var W=this.exportParams_;W.size=""+this.map_.getSize().width+","+this.map_.getSize().height;W.bbox=au.fromLatLngBoundsToEnvelope(av,x);W.bboxSR=x.wkid;W.imageSR=x.wkid;this.drawing_=true;y.trigger(this,"drawstart");this.mapService_.exportMap(W,function(ax){G.drawing_=false;if(G.redraw_===true){G.redraw_=false;G.refresh();return}if(ax.href){var aC=G.div_;var aw=document.createElement("img");var aB=au.fromEnvelopeToLatLngBounds(ax.extent);var ay=G.map_.getCurrentMapType().getProjection().getWrapWidth(G.map_.getZoom());var aA=G.map_.fromLatLngToDivPixel(aB.getSouthWest());var az=G.map_.fromLatLngToDivPixel(aB.getNorthEast());aC.style.width=ax.width+"px";aC.style.height=ax.height+"px";aC.style.left=aA.x%ay+"px";aC.style.top=az.y+"px";aw.src=ax.href;aC.appendChild(aw);G.img_=aw;G.setOpacity(G.opacity_)}y.trigger(G,"drawend",ax)})};M.prototype.initialize=function(x){var G=document.createElement("div");G.style.position="absolute";x.getPane(am).appendChild(G);this.map_=x;this.zoomLevel_=x.getZoom();this.div_=G;this.img_=null;this.moveEndListener_=y.bind(this.map_,"moveend",this,this.refresh);this.mapTypeChangeListener_=y.bind(this.map_,"maptypechanged",this,this.refresh);this.mapTypeAddListener_=y.bind(this.map_,"addmaptype",this,this.setupMapType_);this.map_.getArcGISOverlays().push(this);if(this.hasLoaded()){this.setupMapType_()}this.show()};M.prototype.remove=function(){y.removeListener(this.moveEndListener_);y.removeListener(this.mapTypeChangeListener_);this.div_.parentNode.removeChild(this.div_);t(this.map_.getArcGISOverlays(),this);var G=this.map_.getMapTypes();for(var x=0;x<G.length;x++){var W=G[x];if(W.agsOvs_){t(W.agsOvs_,this)}}};M.prototype.getCopyright=function(G,x){if(!this.isHidden()&&this.getFullBounds().intersects(G)&&this.isInZoomRange_()){return this.mapService_.copyrightText}};M.prototype.copy=function(){return new M(this.url)};M.prototype.isHidden=function(){return !(this.visible_&&this.isInZoomRange_()&&this.getFullBounds().intersects(this.map_.getBounds()))};M.prototype.isInZoomRange_=function(){var x=this.map_.getZoom();if((this.minZoom_!==undefined&&x<this.minZoom_)||(this.maxZoom_!==undefined&&x>this.maxZoom_)){return false}return true};M.prototype.show=function(){this.visible_=true;this.div_.style.visibility="visible";this.refresh()};M.prototype.hide=function(){this.visible_=false;this.div_.style.visibility="hidden"};M.prototype.redraw=function(x){};function f(aw,G){var av=this;G=G||{};var W=aw;if(p(aw)){W=new ao(aw)}var x=W.getMapService();if(x.hasLoaded()===false){y.addListener(x,"load",function(){av.init_(W,G)})}else{this.init_(W,G)}X.call(this,W,G)}f.prototype=new X();f.prototype.init_=function(G,x){X.call(this,G,x);y.trigger(this,"load");if(this.map_){this.refresh()}};f.prototype.initialize=function(x){this.map_=x;x.getArcGISOverlays().push(this);X.prototype.initialize.call(this,x);this.mapTypeChangeHide_=false;this.mapTypeChangeListener_=y.bind(this.map_,"maptypechanged",this,this.onMapTypeChanged_)};f.prototype.onMapTypeChanged_=function(){var x=this.getTileLayer().getProjection().getSpatialReference().wkid;var G=this.map_.getCurrentMapType().getProjection().getSpatialReference().wkid;if(x!==G){this.mapTypeChangeHide_=true;this.hide()}else{if(this.mapTypeChangeHide_===true){this.show();this.mapTypeChangeHide_=false}}};f.prototype.remove=function(){t(this.map_.getArcGISOverlays(),this);y.removeListener(this.mapTypeChangeListener_);X.prototype.remove.call(this)};f.prototype.getName=function(){return this.getTileLayer().getName()};u.prototype.getSpatialReference=function(){return ar.getSpatialReference("102113")};b.prototype.getCopyrights=function(av,W){var ax=[],G,aw;var x=this.getTileLayers();for(G=0;G<x.length;G++){aw=x[G].getCopyright(av,W);if(aw){ax.push(aw)}}if(this.agsOvs_){for(G=0;G<this.agsOvs_.length;G++){aw=this.agsOvs_[G].getCopyright(av,W);if(aw&&v(ax,aw,true)===-1){ax.push(aw)}}}return ax};ak.prototype.setBounds=function(W){var x=W.getCenter();var G=this.getBoundsZoomLevel(W)+1;this.setCenter(x,G)};ak.prototype.getSpatialReference=function(){return this.getCurrentMapType().getProjection().getSpatialReference()};ak.prototype.getArcGISOverlays=function(){this.agsOvs_=this.agsOvs_||[];return this.agsOvs_};ak.prototype.getArcGISResults=function(){this.agsResults_=this.agsResults_||[];return this.agsResults_};ak.prototype.clearArcGISResults=function(){if(this.agsResults_){for(var x=0,G=this.agsResults_.length;x<G;x++){y.clearInstanceListeners(this.agsResults_[x]);this.removeOverlay(this.agsResults_[x]);delete this.agsResults_[x]}}this.agsResults_=[]};ak.prototype.removeOverlays=function(G){if(D(G)){for(var x=0,W=G.length;x<W;x++){this.removeOverlays(G[x])}}else{if(G){this.removeOverlay(G)}}};ak.prototype.addOverlays=function(G){if(D(G)){for(var x=0,W=G.length;x<W;x++){this.addOverlays(G[x])}}else{if(G){this.addOverlay(G)}}};ak.prototype.addArcGISMap=function(W,G){var av=this;var x=new ai(W,function(){if(x.singleFusedMapCache){var ay=new ao(x);var ax=new a([ay]);av.addMapType(ax);if(G){G(ax)}}else{var aw=new M(x);av.addOverlay(aw);if(G){G(aw)}}})};ak.prototype.enableArcGISClick=function(){this.agsClickListener_=this.agsClickListener_||y.addListener(this,"click",this.doArcGISIdentify_)};ak.prototype.arcgisClickEnabled=function(){return this.agsClickListener_!==null};ak.prototype.disableArcGISClick=function(){if(this.agsClickListener_){y.removeListener(this.agsClickListener_);this.agsClickListener_=null}};ak.prototype.setArcGISClickOptions=function(x){this.agsClickOpts_=x||{}};ak.prototype.doArcGISIdentify_=function(ax,G,W){var aA=this;var x=this.agsClickOpts_||{};var aD;var aB;var aw=96;function az(aM,aR){var aL="";if(aR.results){for(var aK=0,aN=aR.results.length;aK<aN;aK++){var aE=aR.results[aK];if(aK>0){aL+="<hr/>"}aL+="<div><table>";aL+='<tr><td class="ags-layername">'+aE.layerName+"</td></tr>";aL+="<tr><td><table>";var aQ=aE.attributes;var aS=true;for(var aP in aQ){if(aQ.hasOwnProperty(aP)){aS=!aS;aL+='<tr class="ags-row-'+(aS?"odd":"even")+'">';aL+='<td class="ags-fieldname">'+aP+"</td>";var aI=aQ[aP];aI=(aI===null||typeof aI==="undefined")?"":""+aI;aL+='<td class="ags-fieldvalue">'+aI+"</td></tr>"}}aL+="</table></td></tr></table></div>";if(aE.geometry){var aG=au.getOptionValue(ab.defaultStyle,x,"style",aM.name,aE.layerName);var aF=au.fromFeatureToOverlays(aE,null,aG);for(var aJ=0;aJ<aF.length;aJ++){aF[aJ].html=aL;aA.agsResults_.push(aF[aJ]);aA.addOverlay(aF[aJ])}}}}else{if(aR.error){aL='<div class  =  "ags-error">error code: '+aR.error.code+" <br/>message:"+aR.error.message+"<br/>details:"+aR.error.details.join(";")+"</div>"}}if(aL.length>0){var aO=aA.getInfoWindow().getTabs();var aH=new h(aM.name,'<div class  =  "ags-infowindow">'+aL+"</div>");aO.push(aH);aA.openInfoWindowTabsHtml(G,aO)}}function av(aJ){var aF=aA.agsSessionID_;var aE=aJ.getSpatialReference();var aI=aA.getBounds();var aG=au.fromLatLngBoundsToEnvelope(aI,aE);var aM=aA.getSize();var aL=au.fromLatLngToPoint(G,aE);var aK={geometry:""+aL.x+","+aL.y,geometryType:ap,sr:aE.wkid,layers:x.layers||"top",tolerance:x.tolerance||5,mapExtent:aG,imageDisplay:""+aM.width+","+aM.height+","+aw,returnGeometry:x.returnGeometry===true};var aH=aK;if(x.serviceOptions&&x.serviceOptions[aJ.name]){aH=ad(x.serviceOptions[aJ.name],aK,true)}aJ.identify(aH,function(aN){if(aF===aA.agsSessionID_){az(aJ,aN)}else{}})}function aC(){var aI=null,aG,aH;var aE=[];var aF=aA.getArcGISOverlays();for(aG=0;aG<aF.length;aG++){if(!aF[aG].isHidden()){if(aF[aG] instanceof M){if(aF[aG].getFullBounds().containsLatLng(G)){aE.push(aF[aG].getMapService())}}else{if(aF[aG] instanceof f){aH=aF[aG].getTileLayer();if(aH.getFullBounds().containsLatLng(G)){aE.push(aH.getMapService())}}}}}var aK=aA.getCurrentMapType();if(aK instanceof a){var aJ=aK.getTileLayers();for(aG=0;aG<aJ.length;aG++){aH=aJ[aG];if(aG===0){aw=aH.getMapService().tileInfo.dpi}if(aH.getFullBounds().containsLatLng(G)){aE.push(aH.getMapService())}}}return aE}if(ax===null&&G){this.getInfoWindow().getTabs().length=0;this.clearArcGISResults();this.agsSessionID_=Math.floor(Math.random()*100000);aD=aC();for(var ay=0;ay<aD.length;ay++){av(aD[ay])}}else{if(W&&ax.html){this.openInfoWindowHtml(W,'<div class  = "ags-infowindow">'+ax.html+"</div>")}}};au.fromEnvelopeToLatLngBounds=function(W){var G=ar.getSpatialReference(W.spatialReference.wkid);G=G||an;var x=G.reverse([W.xmin,W.ymin]);var av=G.reverse([W.xmax,W.ymax]);return new H(new Y(x[1],x[0]),new Y(av[1],av[0]))};au.fromLatLngBoundsToEnvelope=function(av,G){var x=G.forward([av.getSouthWest().lng(),av.getSouthWest().lat()]);var W=G.forward([av.getNorthEast().lng(),av.getNorthEast().lat()]);return{xmin:x[0],ymin:x[1],xmax:W[0],ymax:W[1],spatialReference:{wkid:G.wkid}}};au.fromPointToLatLng=function(x,av){var G=x.spatialReference||av;var W=G?ar.getSpatialReference(G.wkid):an;W=W||an;if(isNaN(x.x)||isNaN(x.y)){return null}var aw=W.reverse([x.x,x.y]);return new Y(aw[1],aw[0])};au.fromLatLngToPoint=function(av,G){var x=null;if(G){x=(G instanceof A)?G:ar.getSpatialReference(G.wkid)}x=x||an;var W=x.forward([av.lng(),av.lat()]);return{x:W[0],y:W[1],spatialReference:{wkid:x.wkid}}};au.createCircle=function(av,W,aw){aw=aw||72;var az=[],ay,G,aA;for(var ax=0;ax<aw;ax++){ay=ax*at*360/aw;G=av.x+W*Math.cos(ay);aA=av.y+W*Math.sin(ay);az.push([G,aA])}az.push(az[0]);return{rings:[az],spatialReference:av.spatialReference}};au.fromFeatureToOverlays=function(av,aw,G,aJ){var W=[];var aE=null;var ax;var aC=av.geometry;if(aw){if(aw instanceof A){aE=aw}else{aE=ar.getSpatialReference(aw.wkid)}}else{aE=ar.getSpatialReference(aC.spatialReference.wkid)}if(aE===null){return W}var aI=G||ab.style;var ay,aH,aA,aF,aL,aB,aD,aG,aK;var aM="";if(aJ){aM=av.attributes[aJ]}var az="<table>";for(ay in av.attributes){if(av.attributes.hasOwnProperty(ay)){az+='<tr><td class="ags-fieldname">'+ay+'</td><td class="ags-fieldvalue">'+av.attributes[ay]+"</td></tr>"}}az+="</table>";if(aC.x){aG=aE.reverse([aC.x,aC.y]);ax=new L(new Y(aG[1],aG[0]),{icon:aI.icon,title:aM});ax.attributes=av.attributes;ax.html=az;W.push(ax)}else{aB=aC.points||aC.paths||aC.rings;if(!aB){return W}for(aH=0,aA=aB.length;aH<aA;aH++){aD=aB[aH];if(aC.points){aG=aE.reverse(aD);ax=new L(new Y(aG[1],aG[0]),{icon:aI.icon})}else{if(aD.length>ab.maxPolyPoints){continue}aK=[];for(aF=0,aL=aD.length;aF<aL;aF++){aG=aE.reverse(aD[aF]);aK.push(new Y(aG[1],aG[0]))}if(aC.paths){ax=new O(aK,aI.strokeColor,aI.strokeWeight,aI.strokeOpacity)}else{if(aC.rings){ax=new ah(aK,aI.outlineColor,aI.outlineWeight,aI.outlineOpacity,aI.fillColor,aI.fillOpacity)}}}ax.attributes=av.attributes;ax.html=az;W.push(ax)}}return W};var k={SpatialReference:A,Geographic:z,LambertConformalConic:aa,SphereMercator:R,TransverseMercator:U,FlatSpatialReference:d,SpatialReferences:ar,MapService:ai,Layer:P,GeocodeService:g,GeometryService:I,Util:au,Config:ab,Projection:aq,TileLayer:ao,TileLayerOverlay:f,MapOverlay:M,MapType:a};var S=ac("google.maputils");S.arcgis=k;if(window.GMap2){for(var Z in k){if(k.hasOwnProperty(Z)){window["ArcGIS"+Z]=k[Z]}}}})();